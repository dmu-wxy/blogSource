---
title: TCP、UDP、握手、挥手
date: 2021-03-16 11:30:51
permalink: /pages/75730a/
categories:
  - 更多
  - 面试
  - 网络
tags:
  - 
---
[参考@陈宝佳](https://zhuanlan.zhihu.com/p/24860273)

TCP/UDP区别，TCP的三次握手、四次挥手

<!-- more -->

# TCP协议的三次握手和四次挥手

TCP(Transmission Control Protocol，传输控制协议)是面向连接的协议，也就是说，在收发数据之前，必须和对方建立可靠的连接。一个TCP连接必须要经过三次“握手”才能建立起来：

- 主机A通过向主机B 发送一个含有同步序列号的标志位的数据段给主机B，向主机B 请求建立连接，通过这个数据段， 主机A告诉主机B 两件事：我想要和你通信；你可以用哪个序列号作为起始数据段来回应我。
- 主机B 收到主机A的请求后，用一个带有确认应答（ACK）和同步序列号（SYN）标志位的数据段响应主机A，也告诉主机A两件事：我已经收到你的请求了，你可以传输数据了；你要用那个序列号作为起始数据段来回应我
- 主机A收到这个数据段后，再发送一个确认应答，确认已收到主机B 的数据段："我已收到回复，我现在要开始传输实际数据了，这样3次握手就完成了，主机A和主机B 就可以传输数据了。

TCP建立连接要进行3次握手，而断开连接要进行四次“挥手”：

- 当主机A完成数据传输后,将控制位FIN置1，提出停止TCP连接的请求 ；
- 主机B收到FIN后对其作出响应，确认这一方向上的TCP连接将关闭,将ACK置1；
- 由B 端再提出反方向的关闭请求,将FIN置1 ；
-  主机A对主机B的请求进行确认，将ACK置1，双方向的关闭结束.。



# TCP协议和UDP协议的区别



1. TCP：基于连接；UDP：基于无连接；
2. 对系统资源的要求（TCP多，UDP少）
3. UDP程序结构较简单
4. TCP：流模式；UDP：数据报模式
5. TCP保证数据正确性，UDP可能丢包
6. TCP保证数据顺序，UDP不保证；

