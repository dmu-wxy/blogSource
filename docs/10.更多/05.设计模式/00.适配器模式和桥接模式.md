适配器模式和桥接模式的对比

<!-- more -->

近期分析了ArkUI跨平台框架的整体架构，架构中的运行时在OS侧由 跨平台适配层 和 平台桥接层 来适配不同的OS。

## 适配器模式

其中适配层使用的适配器模式熟悉，用它写过代码。

用实际的例子讲：应用开发者想要获取应用所在的目录，显然，不同操作系统获取应用所在目录的方法是不同的，而应用开发者要为不同平台开发不同的功能增加了负担，作为SDK开发者就需要提供这种能力。SDK开发者需要为应用开发者提供统一的接口，应用开发者只需要调用这个接口，不管哪个平台都能获得应用所在目录（现在的例子），具体从不同平台获取数据要实现的不同实现类由SDK开发者开发（可以为应用开发者提供工厂类，由工厂类判断当前平台，提供给应用开发者不同的实现类，这又是工厂模式了）。

![](https://refactoringguru.cn/images/patterns/diagrams/adapter/structure-object-adapter.png)

## 桥接模式

桥接模式没有用过，所以现学了一下，发现和适配器模式比较像，按我自己的理解，桥接模式将 Client （上图）也进行了抽象，client 和 Service 成了多对多关系。使用的场景例如UI框架在不同平台上绘制，UI框架中有很多组件，每个组件要在不同的平台上绘制，这样排列组合实现显然太麻烦太麻烦了，于是就有了桥接模式：组件这边将组件抽象，平台这边将绘制方法抽象，一个抽象的组件对应一个抽象的平台绘制方法，这样让一切简单多了。开发者只需要 new 一个组件使用即可，想要自定义组件也只需要通过抽象的 draw 接口画出来，不需要管平台。

![](https://refactoringguru.cn/images/patterns/diagrams/bridge/structure-zh.png)



